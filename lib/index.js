var b=Object.defineProperty;var m=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var p=(r,o,e)=>o in r?b(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,i=(r,o)=>{for(var e in o||(o={}))C.call(o,e)&&p(r,e,o[e]);if(m)for(var e of m(o))I.call(o,e)&&p(r,e,o[e]);return r};var c=(r,o,e)=>new Promise((t,g)=>{var l=n=>{try{a(e.next(n))}catch(s){g(s)}},f=n=>{try{a(e.throw(n))}catch(s){g(s)}},a=n=>n.done?t(n.value):Promise.resolve(n.value).then(l,f);a((e=e.apply(r,o)).next())});import k from"axios";import L from"bowser";import y from"@fingerprintjs/fingerprintjs";var x={debug:!1,disable:!1,logEndpoint:"",staticInfo:{}},d=x;function u(){return d}function h(r){d=r}function P(){return c(this,null,function*(){return(yield(yield y.load()).get()).visitorId})}function w(r,o){return c(this,null,function*(){let e=window.location.href,{language:t}=navigator,g=[...navigator.languages],l=L.parse(navigator.userAgent),f=`${window.innerWidth}x${window.innerHeight}`,a=yield P(),n=new Date().toString(),s={reducedData:matchMedia("(prefers-reduced-data: reduce)").matches,reducedMotion:matchMedia("(prefers-reduced-motion: reduce)").matches,darkColorScheme:matchMedia("(prefers-color-scheme: dark)").matches,lightColorScheme:matchMedia("(prefers-color-scheme: light)").matches,moreContrast:matchMedia("(prefers-contrast: more)").matches};return{errorType:r,url:e,language:t,allLanguages:g,browserInfo:l,deviceDimensions:f,browserId:a,localTime:n,userPreferences:s,extraInfo:i(i({},d.staticInfo),o)}})}function F(r){let o=u();h(i(i({},o),r))}function G(r,o){return c(this,null,function*(){let e=u();if(e.disable)return;let t=yield w(r,o);if(e.debug){console.log(`%c client-error-logger %c ${t.errorType} `,"background: #db3534; color: white;","background: lightgrey; color: #333;","Endpoint called with parameters:",t);return}if(!e.logEndpoint)return console.error("Logger endpoint not configured");yield k.post(e.logEndpoint,{data:t})})}export{F as configure,G as logError};
//# sourceMappingURL=index.js.map